on:
  pull_request:
    types: 
      - closed
    branches:
      - develop
  push:
    branches:
      - "feature*"
    
    paths:
      - 'addresses/**'
      - 'admin-notification/**'
      - 'annual-price/**'
      - 'appliances/**'
      - 'auth/**'
      - 'automatic-ftp/**'
      - 'automatic-target-load/**'
      - 'card-token/**'
      - 'check-in/**'
      - 'consumption/**'
      - 'contracts/**'
      - 'data/**'
      - 'dualization-campaign/**'
      - 'email-sent-archive/**'
      - 'erroneous-payment-deletion/**'
      - 'export-power-consultancy/**'
      - 'facilita/**'
      - 'fidelisation-catalog-update/**'
      - 'gateway-orders/**'
      - 'generic-event-export/**'
      - 'help/**'
      - 'hiring/**'
      - 'inquires/**'
      - 'invoice-notification/**'
      - 'invoices/**'
      - 'login-reporting/**'
      - 'mailing-function/**'
      - 'managements/**'
      - 'no-consent-reporting/**'
      - 'payment/**'
      - 'points/**'
      - 'power-advisory/**'
      - 'power-change/**'
      - 'power-consultancy/**'
      - 'profile/**'
      - 'reading-contribution/**'
      - 'reprocess-unsent-mail/**'
      - 'sign-up/**'
      - 'sms-token-expiration/**'
      - 'social-bonus/**'
      - 'splitting/**'
      - 'street-load/**'
      - 'subtask-payment-check/**'
      - 'unsent-email-reporting/**'
      - 'update-offices/**'
      - 'update-payment-information/**'
      - 'update-streepmap/**'
      - 'lambda1/**'
      - 'lambda2/**'
jobs:
  
  activate-workflow:  
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
         fetch-depth: 0
    - name: Run script file
      id: run-script
      run: |
         chmod +x ./1.sh
         echo "SELECTED_COLOR={\"include\":[{\"project\":\"foo\",\"config\":\"Debug\"},{\"project\":\"bar\",\"config\":\"Release\"}]}" >> $GITHUB_OUTPUT
      shell: bash
    - name: Get color
      run: echo "The selected color is ${{ steps.run-script.outputs.SELECTED_COLOR }}"

  job2:
    needs: activate-workflow
    runs-on: ubuntu-latest
    strategy:
      matrix: ${{ fromJSON( needs.run-script.outputs.SELECTED_COLOR) }}
    steps:
      - run: echo ${{ (matrix  ) }}    
 # activate-workflow:
 #   needs: changes
 #   if: ${{ needs.changes.outputs.names != '[]' }}
 #   name:  Deploying lambda(s) funtion(s)  
 #   strategy:
 #     matrix:
 #       workflow: ${{ fromJSON(needs.changes.outputs.names) }}
 #   uses: ./.github/workflows/reusable-workflow.yml
 #   with:
 #     stage: dev
 #     resource: ${{ (matrix.workflow ) }} 

